---
title: "数据库"
description: "MemMachine 使用的数据库"
icon: "database"
---

## 数据库让记忆得以存续

数据库是 MemMachine 智能记忆背后的无名英雄——它们构成了系统的骨干，使 MemMachine 能够在多轮对话之间**可靠地存储与检索信息**。

核心价值体现在：

- **持久记忆：** 数据库保证智能体**不会遗忘**。每次交互、每个事实与偏好都会被记录，智能体可随时回溯不同会话中的上下文。
- **画像管理：** 数据库可精细地组织用户数据，构建丰富且不断演化的**用户画像**，让 MemMachine 快速定位用户特定信息。
- **长期存储：** 海量历史数据得以妥善保留，形成智能体的**长期记忆**，帮助其真正实现“越用越懂你”。

凭借稳定、有序且易于访问的记忆结构，数据库让 MemMachine 能够支撑智能体与用户进行更聪明、个性化的信息交流。

默认情况下，MemMachine 会使用以下数据库：

## neo4j

Neo4j 是领先的**图数据库**，专门用于存储和管理高度关联的数据。它以三个基本组件为核心：

1. **节点（Nodes）：** 表示实体（如 `User`、`Conversation`、`Fact`、`Agent`、`Product Feature`），可附带标签与属性。
2. **关系（Relationships）：** 表达节点之间的关键连接（如 `User` --`DISCUSSED`--> `Conversation`、`Fact` --`RELATED_TO`--> `Product Feature`），关系具备方向，也可以拥有属性（如 `timestamp`）。
3. **属性（Properties）：** 节点或关系的键值对描述，例如 `User` 节点的 `name: "Sarah"`、`email: "sarah@example.com"`。

这种设计让“关系”成为一等公民，直接且高效地被存储与查询。

### MemMachine 如何利用 Neo4j 构建长期记忆

MemMachine 借助 Neo4j 的图谱能力，为智能体构建健壮、智能的**长期记忆**，着重理解并管理复杂关系：

- **构建丰富画像：** `User` 节点可明确关联到 `Conversations`、`Preferences`、`Goals`、`Sentiments Expressed`、`Specific Products Used` 等，使用户画像成为动态、演化的数据网络。
- **上下文回溯与多跳推理：** 当需要回忆特定信息时，MemMachine 可沿着这些显式关系进行查询。例如回答“用户上周问过新功能什么问题？”时，可沿路径 `User` -> `DISCUSSED` -> `Conversation` -> `ABOUT` -> `Feature` 进行多跳推理。
- **管理派生信息：** 不仅存储原始事实，也能把推理出的洞察（如 `User` --`EXPRESSED_FRUSTRATION_ABOUT`--> `Bug`）写入图谱中，使这些“派生知识”可查询并纳入长期记忆。
- **可扩展的关系管理：** Neo4j 对复杂关系的遍历速度极快，即便面对庞大数据集也保持高效，支撑 MemMachine 构建不断增长的记忆网络。

借助 Neo4j，MemMachine 的记忆不再只是分散的事实集合，而是紧密关联、深度理解的知识图谱，为智能体提供充足上下文和洞察。

> 想了解 MemMachine 在 Neo4j 中使用的结构，请参阅 [Memory Types](./memory_types) 中的长期记忆部分。

## PostgreSQL

PostgreSQL 是先进的开源**关系型数据库管理系统（RDBMS）**，以表格（行、列）形式存储数据，并支持数据之间建立显式关系。其可靠性、功能丰富度以及对 SQL 标准的高度兼容，使其成为持久化有序数据的可信选择。

### MemMachine 如何利用 PostgreSQL 构建画像记忆

MemMachine 利用 PostgreSQL 的优势，为智能体打造并维护丰富、动态的**用户画像**：

- **结构化用户数据：** 表格结构非常适合存放画像信息，可在清晰的表中管理用户详情、偏好、设定等，保证一致性与可维护性。
- **可靠持久化：** 画像记忆至关重要——智能体不能忘记用户偏好！PostgreSQL 提供**耐久存储**，确保数据写入后安全可用，跨会话甚至重启亦然。
- **高效查询：** 智能体交互时需要迅速获取用户画像。PostgreSQL 强大的 SQL 查询能力可快速回答诸如“用户的首选语言是什么？”、“曾对某个功能表示兴趣吗？”等问题。
- **可扩展管理：** 随着用户数量与画像复杂度增长，PostgreSQL 能够**平稳扩展**，处理更多用户数据而不牺牲性能。

因此，MemMachine 的画像记忆不仅稳固持久，而且结构严密、查询迅速，使智能体能够提供真正个性化且具备上下文意识的体验。

> 想了解 MemMachine 在 PostgreSQL 中的表结构，请参阅 [Memory Types](./memory_types) 中的画像记忆部分。
