---
title: "核心数据结构" 
description: "本文介绍管理记忆所需的核心数据结构，包括会话、上下文以及单条事件（Episode）。" 
icon: "cube"
---
这些数据类型是 MemMachine SDK 的原子级积木，用于描述单条事件（`Episode`）如何被记录，也用于定义不同会话的记忆实例如何通过 `MemoryContext` 进行隔离。

<a id="memmachine.core_types.ContentType"></a>

## ContentType (Enum)

```python
class ContentType(Enum)
```

该枚举用于说明 **`Episode` 的 `content` 字段** 中存放的数据格式。

| 成员       | 值         | 说明                             |
| ---------- | ---------- | -------------------------------- |
| `STRING`   | `"string"` | 内容为标准文本字符串。           |

<Note>该设计便于未来扩展，例如支持向量嵌入或图像元数据，而无需修改 Episode 的核心结构。</Note>

<a id="memmachine.core_types.Episode"></a>

## Episode Objects

```python
@dataclass(kw_only=True)
class Episode
```

**`Episode`** 表示记忆系统中的一条原子事件或数据，例如用户消息、智能体的内部想法等。

使用 `@dataclass(kw_only=True)` 表示在创建 `Episode` 实例时，**所有字段都必须通过关键字参数指定**。

| 字段                   | 类型               | 说明                                                         |
| ---------------------- | ------------------ | ------------------------------------------------------------ |
| **`uuid`**             | `UUID`             | 该 Episode 的唯一标识。                                      |
| **`episode_type`**     | `str`              | 事件类型（如 `'message'`、`'thought'`、`'action'`）。         |
| **`content_type`**     | `ContentType`      | `content` 字段的数据类型。                                   |
| **`content`**          | `Any`              | 实际的事件内容。                                             |
| **`timestamp`**        | `datetime`         | 事件发生的日期与时间。                                       |
| **`group_id`**         | `str`              | 对话所属的 **群组** 标识。                                    |
| **`session_id`**       | `str`              | 该 Episode 所归属的 **会话** 标识。                           |
| **`producer_id`**      | `str`              | 创建该 Episode 的用户或智能体 ID。                           |
| **`produced_for_id`**  | `str | None`       | 若存在，表示目标接收方的 ID。                                 |
| **`user_metadata`**    | `JSONValue | None` | JSON 兼容的自定义附加信息字典。                              |

<a id="memmachine.core_types.MemoryContext"></a>

## MemoryContext Objects

```python
@dataclass
class MemoryContext
```

`EpisodicMemoryManager` 使用 **`MemoryContext`** 来定义记忆实例的唯一标识，确保记忆访问被隔离到正确的会话。

| 字段              | 类型       | 说明                                      |
| ----------------- | ---------- | ----------------------------------------- |
| **`group_id`**    | `str`      | 群组上下文的标识。                        |
| **`agent_id`**    | `set[str]` | 该上下文中参与的智能体 ID 集合。          |
| **`user_id`**     | `set[str]` | 该上下文中参与的用户 ID 集合。            |
| **`session_id`**  | `str`      | 会话上下文的标识。                        |


### 隔离的特殊行为
<Callout icon="key" color="#FFC107" iconType="regular">`MemoryContext` 定义了自定义的相等比较（`__eq__`）与哈希（`__hash__`）方法。**仅当两个上下文的 `group_id` 与 `session_id` 相同，它们才被视为相等。** 因此管理器始终以这两个字段作为活跃记忆实例的主键，不受智能体与用户集合差异的影响。</Callout>


<a id="memmachine.core_types.SessionInfo"></a>

## SessionInfo Objects

```python
@dataclass
class SessionInfo
```

**`SessionInfo`** 保存单个会话的持久化元数据。在打开已存在的记忆实例时，这些信息会通过 `SessionManager` 取回。

| 字段                | 类型        | 说明                                                        |
| -------------------- | ----------- | ----------------------------------------------------------- |
| **`group_id`**       | `str`       | 对话群组标识。                                              |
| **`session_id`**     | `str`       | 会话的唯一字符串标识。                                      |
| **`agent_ids`**      | `list[str]` | 参与该会话的智能体 ID 列表。                                |
| **`user_ids`**       | `list[str]` | 参与该会话的用户 ID 列表。                                  |
| **`configuration`**  | `dict`      | 针对该会话的自定义配置字典。                                |

<a id="memmachine.core_types.GroupConfiguration"></a>

## GroupConfiguration Objects

```python
@dataclass
class GroupConfiguration
```

**`GroupConfiguration`** 用于保存多会话对话群组的持久化元数据。

| 字段                | 类型        | 说明                                                         |
| -------------------- | ----------- | ------------------------------------------------------------ |
| **`group_id`**       | `str`       | 群组的唯一标识。                                             |
| **`agent_list`**     | `list[str]` | 属于该群组的智能体 ID 列表。                                 |
| **`user_list`**      | `list[str]` | 属于该群组的用户 ID 列表。                                   |
| **`configuration`**  | `dict`      | 群组的自定义配置字典。                                       |
